<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>asong.live ‚Äî Scan to Request</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:#0a0a0a; min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; font-family:'DM Sans',sans-serif; padding:24px; }
  .qr-card { background:#f5f5f0; border-radius:12px; padding:40px 48px; text-align:center; max-width:480px; width:100%; }
  .logo-wrap { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:6px; }
  .logo-text { font-family:'Bebas Neue','Arial Black',sans-serif; font-size:2.8rem; letter-spacing:3px; color:#0a0a0a; line-height:1; }
  .logo-text span { color:#FF6B2B; }
  .tagline { font-size:0.65rem; letter-spacing:4px; text-transform:uppercase; color:#999; margin-bottom:24px; }
  .event-name { font-family:'Bebas Neue','Arial Black',sans-serif; font-size:1.6rem; letter-spacing:2px; color:#0a0a0a; margin-bottom:16px; display:none; }
  .event-name.visible { display:block; }
  .qr-wrap { background:#fff; border-radius:8px; padding:16px; display:inline-block; margin-bottom:24px; border:2px solid #e0e0d8; }
  .qr-wrap img { width:260px; height:260px; display:block; }
  .instruction { font-size:1rem; font-weight:700; color:#0a0a0a; letter-spacing:1px; margin-bottom:4px; }
  .instruction-sub { font-size:0.78rem; color:#666; margin-bottom:20px; }
  .url-bar { background:#0a0a0a; color:#FF6B2B; border-radius:6px; padding:10px 16px; font-family:'Bebas Neue',monospace; font-size:1.1rem; letter-spacing:2px; margin-bottom:20px; }
  .steps { display:flex; justify-content:center; gap:20px; margin-bottom:24px; }
  .step { display:flex; flex-direction:column; align-items:center; gap:6px; flex:1; max-width:100px; }
  .step-icon { width:44px; height:44px; background:#fff3ee; border-radius:50%; border:2px solid #FF6B2B; display:flex; align-items:center; justify-content:center; }
  .step-text { font-size:0.65rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:#555; text-align:center; line-height:1.3; }
  .bottom-bar { display:flex; align-items:center; justify-content:space-between; border-top:1px solid #e0e0d8; padding-top:16px; }
  .powered { font-size:0.65rem; color:#aaa; letter-spacing:2px; text-transform:uppercase; }
  .download-btn { background:#0a0a0a; color:#fff; border:none; border-radius:4px; padding:8px 16px; font-family:'DM Sans',sans-serif; font-size:0.72rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; cursor:pointer; text-decoration:none; display:inline-block; }
  .controls { margin-top:24px; display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }
  .ctrl-btn { background:#1a1a1a; color:#f5f5f0; border:none; border-radius:4px; padding:10px 20px; font-family:'DM Sans',sans-serif; font-size:0.75rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; cursor:pointer; transition:all .2s; }
  .ctrl-btn:hover { background:#FF6B2B; }
  @media print {
    body { background:#fff !important; padding:0; }
    .qr-card { box-shadow:none; border:none; }
    .controls { display:none; }
    .url-bar { background:#0a0a0a !important; -webkit-print-color-adjust:exact; print-color-adjust:exact; }
    .step-icon { background:#0a0a0a !important; -webkit-print-color-adjust:exact; print-color-adjust:exact; }
  }
  @media (max-width:500px) {
    .qr-card { padding:28px 20px; }
    .qr-wrap img { width:220px; height:220px; }
    .steps { gap:10px; }
  }
</style>
</head>
<body>

<div class="qr-card">
  <div class="logo-wrap">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 60" width="28" height="42">
      <rect x="0" y="15" width="5" height="30" fill="#FF6B2B" rx="2" opacity="0.4"/>
      <rect x="9" y="8" width="5" height="44" fill="#FF6B2B" rx="2" opacity="0.7"/>
      <rect x="18" y="0" width="5" height="60" fill="#FF6B2B" rx="2"/>
      <rect x="27" y="10" width="5" height="40" fill="#FF6B2B" rx="2" opacity="0.7"/>
      <rect x="36" y="20" width="5" height="20" fill="#FF6B2B" rx="2" opacity="0.4"/>
    </svg>
    <div class="logo-text">asong<span>.live</span></div>
  </div>
  <div class="tagline">From the crowd to the decks.</div>
  <div class="event-name" id="eventNameDisplay"></div>
  <div class="qr-wrap">
    <img src="/qr" alt="QR Code">
  </div>
  <div class="instruction" id="instructionText">Scan to request your song</div>
  <div class="instruction-sub" id="instructionSub">No app needed ‚Äî just your phone camera</div>
  <div class="url-bar">{{ base_url }}</div>
  <div class="steps">
    <div class="step"><div class="step-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#FF6B2B" stroke-width="2.5"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="4" height="4" rx="0.5"/></svg></div><div class="step-text" id="step1">Scan QR</div></div>
    <div class="step"><div class="step-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#FF6B2B" stroke-width="2.5"><circle cx="11" cy="11" r="7"/><line x1="16.5" y1="16.5" x2="22" y2="22"/></svg></div><div class="step-text" id="step2">Search Song</div></div>
    <div class="step"><div class="step-icon"><svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="#FF6B2B" stroke-width="2.5"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></div><div class="step-text" id="step3">Send Request</div></div>
  </div>
  <div class="bottom-bar">
    <div class="powered">Powered by asong.live</div>
    <a href="/qr" download="asong-qr.png" class="download-btn">‚¨á Download QR</a>
  </div>
</div>

<div class="controls" id="controls">
  <button class="ctrl-btn" onclick="setLang('en')">üá∫üá∏ English</button>
  <button class="ctrl-btn" onclick="setLang('es')">üá≤üáΩ Espa√±ol</button>
  <button class="ctrl-btn" onclick="window.print()">üñ®Ô∏è Print</button>
  <button class="ctrl-btn" onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
</div>

<script>
fetch('/api/config/publica').then(r=>r.json()).then(cfg=>{
  if(cfg.event_name && cfg.event_name!=='DJ Request' && cfg.event_name!=='Mi Evento'){
    document.getElementById('eventNameDisplay').textContent = cfg.event_name;
    document.getElementById('eventNameDisplay').classList.add('visible');
  }
}).catch(()=>{});

function setLang(l){
  if(l==='es'){
    document.getElementById('instructionText').textContent='Escanea para pedir tu canci√≥n';
    document.getElementById('instructionSub').textContent='Sin app ‚Äî solo la c√°mara de tu celular';
    document.getElementById('step1').textContent='Escanea el QR';
    document.getElementById('step2').textContent='Busca tu canci√≥n';
    document.getElementById('step3').textContent='Env√≠a tu solicitud';
  } else {
    document.getElementById('instructionText').textContent='Scan to request your song';
    document.getElementById('instructionSub').textContent='No app needed ‚Äî just your phone camera';
    document.getElementById('step1').textContent='Scan QR';
    document.getElementById('step2').textContent='Search Song';
    document.getElementById('step3').textContent='Send Request';
  }
}

function toggleFullscreen(){
  if(!document.fullscreenElement){
    document.documentElement.requestFullscreen();
    document.getElementById('controls').style.display='none';
  } else {
    document.exitFullscreen();
    document.getElementById('controls').style.display='flex';
  }
}

document.addEventListener('fullscreenchange',()=>{
  if(!document.fullscreenElement) document.getElementById('controls').style.display='flex';
});

if(navigator.language.startsWith('es')) setLang('es');
</script>
</body>
</html>
